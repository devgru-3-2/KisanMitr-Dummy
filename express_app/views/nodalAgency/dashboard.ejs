<!DOCTYPE html>
<html>
<head>
  <title>Nodal Agency Dashboard</title>
</head>
<body>
  <h1>Nodal Agency Dashboard</h1>

  <h2>Log Procurement</h2>
  <form action="/nodal-agency/procurements" method="POST">
    <label for="distributorPhone">Distributor Phone:</label>
    <input type="text" id="distributorPhone" name="distributorPhone" required><br><br>
    <label for="procurementDetails">Procurement Details:</label>
    <input type="text" id="procurementDetails" name="procurementDetails" required><br><br>
    <button type="submit">Log Procurement</button>
  </form>

  <h2>All Procurements</h2>
  <table>
    <tr>
      <th>Distributor</th>
      <th>Details</th>
      <th>Created At</th>
    </tr>
    <% procurements.forEach((procurement) => { %>
      <tr>
        <td><%= procurement.distributor %></td>
        <td><%= procurement.details %></td>
        <td><%= procurement.createdAt %></td>
      </tr>
    <% }) %>
  </table>

  <h2>Get Zipcode Data</h2>
  <form action="/nodal-agency/zipcodes" method="GET">
    <label for="zipcode">Zipcode:</label>
    <input type="text" id="zipcode" name="zipcode" required><br><br>
    <button type="submit">Get Data</button>
  </form>

  <h2>Get Procurements by Distributor</h2>
  <form action="/nodal-agency/procurements/<%= distributor._id %>" method="GET">
    <label for="distributor">Select a distributor:</label>
    <select id="distributor" name="distributor">
      <% distributors.forEach((distributor) => { %>
        <option value="<%= distributor._id %>"><%= distributor.name %></option>
      <% }) %>
    </select><br><br>
    <button type="submit">Get Procurements</button>
  </form>

  <h2>Add Procurement</h2>
  <form action="/nodal-agency/procurements" method="POST">
    <label for="distributor">Select a distributor:</label>
    <select id="distributor" name="distributorId">
      <% distributors.forEach((distributor) => { %>
        <option value="<%= distributor._id %>"><%= distributor.name %></option>
      <% }) %>
    </select><br><br>
    <label for="product">Select a product:</label>
    <select id="product" name="productId">
      <% products.forEach((product) => { %>
        <option value="<%= product._id %>"><%= product.name %></option>
      <% }) %>
    </select><br><br>
    <label for="quantity">Quantity:</label>
    <input type="text" id="quantity" name="quantity" required><br><br>
    <label for="date">Date:</label>
    <input type="date" id="date" name="date" required><br><br>
    <button type="submit">Add Procurement</button>
  </form>

</body>
</html>
